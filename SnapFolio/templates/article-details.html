<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Articles - SnapFolio Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="{% static 'img/favicon.png' %}" rel="icon">
  <link href="{% static 'img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Ubuntu:wght@300;400;500;700&family=Nunito:wght@300;400;600;700&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
</head>

<body class="articles-details-page">

  <main class="main">

    <!-- Page Title -->
    <div class="page-title dark-background">
      <i class="header-toggle d-xl-none bi bi-list"></i>
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">{{ main_article.title }}</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="{% url 'index' %}">Home</a></li>
            <li><a href="{% url 'articles' %}">Articles</a></li>
            <li class="current">Articles Details</li>
          </ol>
        </nav>
      </div>
    </div>
    <!-- End Page Title -->

    <!-- Articles Section -->
    <div class="container py-4">
      <div class="row">
        {% for sub in sub_articles %}
          <div class="card mb-4 bg-dark text-light border-0 shadow-sm rounded-4 h-100" 
              data-aos="fade-up" 
              data-aos-delay="{{ forloop.counter0|add:100 }}">
            <a href="{% url 'article_read' sub.id %}" class="text-decoration-none text-light">
              <div class="card-body d-flex flex-column flex-md-row justify-content-between align-items-start">
                
                <!-- Left: Title, author, description -->
                <div class="me-md-3 flex-grow-1">
                  <h5 class="fw-bold mb-2">{{ sub.title }}</h5>

                  <div class="d-flex align-items-center mb-3">
                    {% if main_article.author_image %}
                      <img src="{{ main_article.author_image.url }}" class="rounded-circle me-2" 
                          style="width: 30px; height: 30px;" alt="author">
                    {% else %}
                      <img src="" class="rounded-circle me-2" alt="author">
                    {% endif %}
                    <small class="text-secondary">
                      {{ main_article.author|default:"Unknown Author" }} • 
                      {{ sub.date_published|date:"M d, Y" }} • 
                      {{ sub.read_time|default:"1 min read" }} • 
                      {{ sub.views|default:0 }} views
                    </small>
                  </div>

                  <p class="small mb-0 text-secondary">
                    {{ sub.content|truncatewords:18|safe }}
                  </p>
                </div>

                <!-- Right: Image or No Image -->
                {% if sub.image %}
                  <div class="article-image mt-3 mt-md-0">
                    <img src="{{ sub.image.url }}" alt="{{ sub.title }}" 
                        class="rounded-3"
                        style="width: 150px; height: 100px; object-fit: cover;">
                  </div>
                {% else %}
                  <div class="article-image text-center text-muted bg-secondary bg-opacity-25 px-3 py-4 rounded-3 mt-3 mt-md-0">
                    No Image
                  </div>
                {% endif %}
              </div>
            </a>
          </div>
        </div>
        {% empty %}
        <p class="text-light">No articles available under this category yet.</p>
        {% endfor %}
      </div>
    </div>


    <!-- /Articles Section -->

  </main>

  <!-- Footer -->
  <footer id="footer" class="footer position-relative">
    <div class="container">
      <div class="copyright text-center">
        <p>© <span>Copyright</span>
          <strong class="px-1 sitename">SnapFolio</strong>
          <span>All Rights Reserved</span>
        </p>
      </div>
      <div class="credits">
        Designed by <a href="https://subashdhami.com.np/">subashdhami</a>
      </div>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- Vendor JS Files -->
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'vendor/aos/aos.js' %}"></script>
  <script src="{% static 'vendor/typed.js/typed.umd.js' %}"></script>
  <script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'vendor/waypoints/noframework.waypoints.js' %}"></script>
  <script src="{% static 'vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
  <script src="{% static 'vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
  <script src="{% static 'vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'js/main.js' %}"></script>

</body>
</html>
